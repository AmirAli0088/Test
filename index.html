<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#4a148c"> <title>ุดูุงุฑุดฺฏุฑ ูุนฺฉูุณ ุนุฏ ุบุฏุฑ</title>

    <link rel="stylesheet" href="style.css">

    <link rel="manifest" href="/manifest.json">

</head>
<body>
    <div class="container">
        <h1 id="event-title">ุดูุงุฑุดฺฏุฑ ุนุฏ ุบุฏุฑ</h1>
        <div class="message" id="event-description">ุฒูุงู ุจุงู ูุงูุฏู ุชุง ุนุฏ ุณุนุฏ ุบุฏุฑ ุฎู</div>

        <div class="countdown">
            <div class="countdown-item">
                <div class="countdown-number" id="days">00</div>
                <div class="countdown-label">ุฑูุฒ</div>
            </div>
            <div class="countdown-item">
                <div class="countdown-number" id="hours">00</div>
                <div class="countdown-label">ุณุงุนุช</div>
            </div>
            <div class="countdown-item">
                <div class="countdown-number" id="minutes">00</div>
                <div class="countdown-label">ุฏููู</div>
            </div>
            <div class="countdown-item">
                <div class="countdown-number" id="seconds">00</div>
                <div class="countdown-label">ุซุงูู</div>
            </div>
        </div>

        <div id="azanNotificationMessage" class="azan-message">
            ๐ฃ ููุช ุงุฐุงู ุดุฏู ุงุณุช! ๐ฃ
        </div>

        <button class="notification-btn" id="notificationBtn">ูุนุงู ฺฉุฑุฏู ุงุนูุงู</button>
    </div>

    <audio id="azanAudio" preload="auto">
        <source src="audio/azan_sound.mp3" type="audio/mpeg">
        <source src="audio/azan_sound.ogg" type="audio/ogg">
        ูุฑูุฑฺฏุฑ ุดูุง ุงุฒ ุนูุตุฑ audio ูพุดุชุจุงู ููโฺฉูุฏ.
    </audio>
    <audio id="finishAudio" preload="auto">
        <source src="audio/final_jingle.mp3" type="audio/mpeg">
        <source src="audio/final_jingle.ogg" type="audio/ogg">
        ูุฑูุฑฺฏุฑ ุดูุง ุงุฒ ุนูุตุฑ audio ูพุดุชุจุงู ููโฺฉูุฏ.
    </audio>

    <div class="completed" id="completed">
        <div class="completed-message" id="completed-message">ุนุฏ ุบุฏุฑ ูุจุงุฑฺฉ!</div>
    </div>

    <script>
        // ุชูุธูุงุช ูุงุจู ุชุบุฑ
        const config = {
            eventTitle: "ุดูุงุฑุดฺฏุฑ ุนุฏ ุบุฏุฑ",
            eventDescription: "ุฒูุงู ุจุงู ูุงูุฏู ุชุง ุนุฏ ุณุนุฏ ุบุฏุฑ ุฎู",
            // ุชูุฌู: ุชุงุฑุฎ ูุฏู ุจุงุฏ ุจู ููุช ูุญู ุชูุฑุงู (UTC+3:30) ุชูุธู ุดูุฏ.
            // ุจุฑุง ุชุณุช: 2 ุฏููู ู 10 ุซุงูู ุงุฒ ุงูุงู (ุฒูุงู ูุนู: June 8, 2025 at 12:09:50 AM +0330)
            // ูพุณ targetDate ู ุชูุงูุฏ 2025-06-08T00:12:00+03:30 ุจุงุดุฏ
            // ูุทูุงู ุงู ุชุงุฑุฎ ุฑุง ุจู ุชุงุฑุฎ ูุงูุน ุนุฏ ุบุฏุฑ ุชูุธู ฺฉูุฏ.
            // ูุซุงู ุจุฑุง 28 ุชุฑ 1404 (19 ุฌููุง 2025) ุณุงุนุช 20:00:00
            targetDate: "2025-06-08T00:25:00+03:30",

            // ุฒูุงู ูพุฎุด ุงุฐุงู (ุจุฑ ุญุณุจ ุฏููู ูุจู ุงุฒ ูพุงุงู ุชุงูุฑ)
            // ุจุฑุง ุชุณุช: 0.5 ุฏููู (30 ุซุงูู) ูุจู ุงุฒ ูพุงุงู
            // ุจุฑุง ุงุณุชูุงุฏู ูุงูุน: ูุซูุงู 10 ุฏููู (10)
            azanBeforeEndMinutes: 10,

            notificationThresholds: [
                { hours: 24, message: "ููุท 24 ุณุงุนุช ุชุง ุนุฏ ุบุฏุฑ ุจุงู ูุงูุฏู!" },
                { hours: 12, message: "ููุท 12 ุณุงุนุช ุชุง ุนุฏ ุบุฏุฑ ุจุงู ูุงูุฏู!" },
                { hours: 6, message: "ููุท 6 ุณุงุนุช ุชุง ุนุฏ ุบุฏุฑ ุจุงู ูุงูุฏู!" },
                { hours: 1, message: "ููุท 1 ุณุงุนุช ุชุง ุนุฏ ุบุฏุฑ ุจุงู ูุงูุฏู!" }
            ],
            completedMessage: "๐ ุนุฏ ุบุฏุฑ ูุจุงุฑฺฉ! ๐",
            notificationTitle: "ููุช ุดุงุฏ ุฑุณุฏู ุงุณุช!",
            notificationMessage: "ุนุฏ ุบุฏุฑ ุฎู ูุฑุง ุฑุณุฏู ุงุณุช!",
            colors: {
                primary: "#4a148c",
                secondary: "#6a11cb",
                accent: "#ff416c"
            }
        };

        // ุนูุงุตุฑ DOM
        const elements = {
            eventTitle: document.getElementById('event-title'),
            eventDescription: document.getElementById('event-description'),
            days: document.getElementById('days'),
            hours: document.getElementById('hours'),
            minutes: document.getElementById('minutes'),
            seconds: document.getElementById('seconds'),
            completed: document.getElementById('completed'),
            completedMessage: document.getElementById('completed-message'),
            notificationBtn: document.getElementById('notificationBtn'),
            container: document.querySelector('.container'),
            // ุนูุงุตุฑ ุฌุฏุฏ ุจุฑุง ุงุฐุงู ู ุขููฺฏ ูพุงุงู
            azanNotificationMessage: document.getElementById('azanNotificationMessage'),
            azanAudio: document.getElementById('azanAudio'),
            finishAudio: document.getElementById('finishAudio')
        };

        // ูุชุบุฑูุง ุญุงูุช
        let notificationPermission = false;
        let hasFinalNotificationBeenSent = false;
        let notifiedThresholds = [];
        let azanPlayed = false; // ูพุฑฺู ุฌุฏุฏ ุจุฑุง ุงุทููุงู ุงุฒ ุงูฺฉู ุงุฐุงู ููุท ฺฉ ุจุงุฑ ูพุฎุด ุดูุฏ
        let finalSoundPlayed = false; // ูพุฑฺู ุฌุฏุฏ ุจุฑุง ุงุทููุงู ุงุฒ ุงูฺฉู ุขููฺฏ ูพุงุงู ููุท ฺฉ ุจุงุฑ ูพุฎุด ุดูุฏ

        // ุงุนูุงู ุชูุธูุงุช
        elements.eventTitle.textContent = config.eventTitle;
        elements.eventDescription.textContent = config.eventDescription;
        elements.completedMessage.textContent = config.completedMessage;

        // ุชุงุจุน ุจุฑุง ุฏุฑุงูุช ุฒูุงู ูุนู ุชูุฑุงู
        function getTehranTime() {
            const now = new Date();
            // ูุญุงุณุจู ุงุฎุชูุงู ุณุงุนุช ุงุฑุงู (UTC+3:30)
            const tehranOffset = 3.5 * 60 * 60 * 1000;
            const utc = now.getTime() + (now.getTimezoneOffset() * 60000); // ุฒูุงู UTC
            return new Date(utc + tehranOffset); // ุฒูุงู ุชูุฑุงู
        }

        // ุชูุงุจุน ูพุฎุด ุตูุช
        function playAzanSound() {
            if (elements.azanAudio) {
                // ุงุทููุงู ุงุฒ ุชููู ูพุฎุด ูุจู ู ุดุฑูุน ุงุฒ ุงูู
                elements.azanAudio.pause();
                elements.azanAudio.currentTime = 0;
                elements.azanAudio.play().catch(e => console.error("Error playing azan audio:", e));

                // ููุงุด ูพุงู ุงุฐุงู
                elements.azanNotificationMessage.style.display = 'block';
                // ุจุนุฏ ุงุฒ ฺูุฏ ุซุงูู ูพุงู ุฑู ูุฎู ฺฉู (ูุซูุงู 5 ุซุงูู)
                setTimeout(() => {
                    elements.azanNotificationMessage.style.display = 'none';
                }, 5000);
            }
        }

        function playFinishSound() {
            if (elements.finishAudio) {
                // ุงุทููุงู ุงุฒ ุชููู ูพุฎุด ูุจู ู ุดุฑูุน ุงุฒ ุงูู
                elements.finishAudio.pause();
                elements.finishAudio.currentTime = 0;
                elements.finishAudio.play().catch(e => console.error("Error playing finish audio:", e));
            }
        }

        // ูุฏุฑุช ุงุนูุงูโูุง (Notifications)
        function checkNotificationSupport() {
            if (!('Notification' in window)) {
                elements.notificationBtn.textContent = 'ูุฑูุฑฺฏุฑ ุงุฒ ุงุนูุงู ูพุดุชุจุงู ููโฺฉูุฏ';
                elements.notificationBtn.disabled = true;
                return false;
            }
            return true;
        }

        function updateNotificationButton() {
            if (!checkNotificationSupport()) return;

            switch(Notification.permission) {
                case 'granted':
                    notificationPermission = true;
                    elements.notificationBtn.textContent = 'ุงุนูุงูโูุง ูุนุงู ูุณุชูุฏ';
                    elements.notificationBtn.disabled = true;
                    break;
                case 'denied':
                    elements.notificationBtn.textContent = 'ุงุนูุงูโูุง ูุณุฏูุฏ ุดุฏูโุงูุฏ';
                    elements.notificationBtn.disabled = true;
                    break;
                default:
                    elements.notificationBtn.textContent = 'ูุนุงู ฺฉุฑุฏู ุงุนูุงูโูุง';
                    elements.notificationBtn.disabled = false;
            }
        }

        async function requestNotificationPermission() {
            if (!checkNotificationSupport()) return;

            try {
                const permission = await Notification.requestPermission();

                if (permission === 'granted') {
                    notificationPermission = true;
                    // ฺฉ ุงุนูุงู ุงููู ุจุฑุง ุชุงุฏ ูุนุงู ุดุฏู ุงุนูุงูโูุง
                    sendNotification('ุงุนูุงู ูุนุงู ุดุฏ', 'ููุช ุฒูุงู ุจู ูพุงุงู ุจุฑุณุฏ ู ุฏุฑ ุขุณุชุงููโูุง ุฒูุงูุ ุจู ุดูุง ุงุทูุงุน ุฏุงุฏู ูโุดูุฏ.');
                }

                updateNotificationButton();
            } catch (error) {
                console.error('ุฎุทุง ุฏุฑ ุฏุฑุฎูุงุณุช ูุฌูุฒ ุงุนูุงู:', error);
                elements.notificationBtn.textContent = 'ุฎุทุง ุฏุฑ ูุนุงูโุณุงุฒ ุงุนูุงู';
            }
        }

        function sendNotification(title, body, tag = null) {
            if (!notificationPermission) return;

            try {
                const options = {
                    body: body,
                    vibrate: [200, 100, 200, 100, 200], // ูุฑุฒุด ฺฏูุด
                    icon: 'icon.png', // ูุณุฑ ุขฺฉูู ุจุฑุง ุงุนูุงู
                    tag: tag // ุจุฑุง ุฌููฺฏุฑ ุงุฒ ููุงุด ุงุนูุงูโูุง ุชฺฉุฑุงุฑ ุจุง ฺฉ ูุญุชูุง ฺฉุณุงู
                };

                // ุงุณุชูุงุฏู ุงุฒ Service Worker ุจุฑุง ุงุนูุงูโูุง ุฏุฑ ูพุณโุฒููู
                if ('serviceWorker' in navigator && navigator.serviceWorker.controller) {
                    navigator.serviceWorker.ready.then(registration => {
                        registration.showNotification(title, options);
                    });
                } else {
                    // Fallback ุจุฑุง ูุฑูุฑฺฏุฑูุง ฺฉู Service Worker ูุฏุงุฑูุฏ ุง ูุนุงู ูุณุช
                    new Notification(title, options);
                }
            } catch (e) {
                console.error('ุฎุทุง ุฏุฑ ุงุฑุณุงู ุงุนูุงู:', e);
            }
        }

        function checkThresholds(remainingMs) {
            const remainingHours = remainingMs / (1000 * 60 * 60);

            // ูุฑุชุจ ุณุงุฒ ุขุณุชุงููโูุง ุจู ุชุฑุชุจ ูุฒูู (ุงุฒ ุจุฒุฑฺฏ ุจู ฺฉูฺฺฉ)
            const sortedThresholds = [...config.notificationThresholds].sort((a, b) => b.hours - a.hours);

            for (const threshold of sortedThresholds) {
                // ุงฺฏุฑ ุฒูุงู ุจุงู ูุงูุฏู ฺฉูุชุฑ ุง ูุณุงู ุขุณุชุงูู ุจุงุดุฏ ู ูุจูุงู ุงู ุขุณุชุงูู ุงุนูุงู ูุดุฏู ุจุงุดุฏ
                // ู ููฺููุ ูุทูุฆู ุดูู ฺฉู ุงุนูุงูโูุง ุขุณุชุงููโูุง ุจุฒุฑฺฏุชุฑ (ฺฉู ุงุฒ ุงู ุขุณุชุงูู ุนุจูุฑ ฺฉุฑุฏูโุงูุฏ) ุงุฑุณุงู ูุดุฏู ุจุงุดูุฏ.
                const hasPassedLargerThreshold = sortedThresholds.some(t =>
                    t.hours > threshold.hours && remainingHours < t.hours && notifiedThresholds.includes(t.hours));

                if (remainingHours <= threshold.hours + (1/3600) && // ุชูุฑุงูุณ 1 ุซุงูู ุจุฑุง ุงุทููุงู ุงุฒ ุงุฑุณุงู ุฏุฑ ูุญุธู ุฏูู
                    remainingHours > threshold.hours - (1/3600) && // ุชูุฑุงูุณ ุจุฑุง ุฌููฺฏุฑ ุงุฒ ุชฺฉุฑุงุฑ ุจุด ุงุฒ ุญุฏ
                    !notifiedThresholds.includes(threshold.hours) &&
                    !hasPassedLargerThreshold) {

                    const message = `${threshold.message} (${formatRemainingTime(remainingMs)})`;
                    sendNotification(config.eventTitle, message, `threshold-${threshold.hours}`);
                    notifiedThresholds.push(threshold.hours); // ุนูุงูุชโฺฏุฐุงุฑ ฺฉู ุงู ุขุณุชุงูู ุงุนูุงู ุดุฏู ุงุณุช
                    break; // ููุท ฺฉ ุงุนูุงู ุงุฒ ุจุฒุฑฺฏุชุฑู ุขุณุชุงููโุง ฺฉู ุฏุฑ ุขู ูุญุธู ูุนุงู ุงุณุช ุงุฑุณุงู ุดูุฏ
                }
            }
        }

        function formatRemainingTime(ms) {
            const days = Math.floor(ms / (1000 * 60 * 60 * 24));
            const hours = Math.floor((ms % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((ms % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((ms % (1000 * 60)) / 1000);

            let result = [];
            if (days > 0) result.push(`${days} ุฑูุฒ`);
            if (hours > 0) result.push(`${hours} ุณุงุนุช`);
            if (minutes > 0) result.push(`${minutes} ุฏููู`);
            if (seconds > 0 && result.length < 2) result.push(`${seconds} ุซุงูู`);

            return result.length > 0 ? result.join(' ู ') : 'ูุญุธุงุช ุฏฺฏุฑ';
        }

        // ุชูุงุจุน ุงุฌุงุฏ ุงููุดูโูุง ุฌุดู (ุงฺฉูู ู ูุดูุดู)
        function createConfetti() {
            const colors = ['#ff0000', '#00ff00', '#0000ff', '#ffff00', '#ff00ff', '#00ffff'];
            const confetti = document.createElement('div');
            confetti.className = 'confetti';
            confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
            confetti.style.left = Math.random() * 100 + 'vw';
            confetti.style.width = Math.random() * 10 + 5 + 'px';
            confetti.style.height = confetti.style.width;
            confetti.style.animationDuration = Math.random() * 3 + 2 + 's';
            document.body.appendChild(confetti);

            setTimeout(() => {
                confetti.remove();
            }, 5000);
        }

        function createFirework() {
            const colors = ['#ff0000', '#00ff00', '#0000ff', '#ffff00', '#ff00ff', '#00ffff'];
            const firework = document.createElement('div');
            firework.className = 'firework';
            firework.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
            firework.style.left = Math.random() * 80 + 10 + 'vw';
            firework.style.top = Math.random() * 80 + 10 + 'vh';
            firework.style.boxShadow = `0 0 10px 5px ${colors[Math.floor(Math.random() * colors.length)]}`;
            document.body.appendChild(firework);

            setTimeout(() => {
                firework.remove();
            }, 1500);
        }

        function startCelebration() {
            // ุงุฌุงุฏ ุงฺฉูู
            for (let i = 0; i < 150; i++) {
                setTimeout(createConfetti, i * 100);
            }

            // ุงุฌุงุฏ ูุดูุดู
            for (let i = 0; i < 30; i++) {
                setTimeout(createFirework, i * 300);
            }

            // ููุงุด ูพุงู ูพุงุงู ู ูุฎู ฺฉุฑุฏู ุชุงูุฑ ุงุตู
            elements.completed.style.display = 'flex';
            elements.container.style.transform = 'scale(0.8)';
            elements.container.style.opacity = '0.3';

            // ูพุฎุด ุขููฺฏ ูพุงุงู
            if (!finalSoundPlayed) {
                playFinishSound();
                finalSoundPlayed = true;
            }

            // ุงุฑุณุงู ุงุนูุงู ูพุงุงู ููุท ฺฉ ุจุงุฑ
            if (!hasFinalNotificationBeenSent) {
                sendNotification(config.notificationTitle, config.notificationMessage, 'final-celebration');
                hasFinalNotificationBeenSent = true;
            }
        }

        // ุชุงุจุน ุงุตู ุดูุงุฑุดฺฏุฑ ูุนฺฉูุณ
        function updateCountdown() {
            const targetDate = new Date(config.targetDate);
            const now = getTehranTime();
            let diff = targetDate - now; // ุงุฎุชูุงู ุฒูุงู ุจุฑ ุญุณุจ ููโุซุงูู

            // --- ููุทู ูพุฎุด ุงุฐุงู ู ููุงุด ูพุงู ---
            // ูุญุงุณุจู ุฒูุงู ุงุฐุงู (ูุซูุงู 10 ุฏููู ูุจู ุงุฒ ูพุงุงู)
            const azanTriggerOffsetMs = config.azanBeforeEndMinutes * 60 * 1000;
            const azanTriggerTime = targetDate.getTime() - azanTriggerOffsetMs;

            // ุงฺฏุฑ ุฒูุงู ูุนู ุงุฒ ุฒูุงู ุงุฐุงู ุนุจูุฑ ฺฉุฑุฏู ู ุชุงูุฑ ูููุฒ ุจู ูพุงุงู ูุฑุณุฏู
            // ู ุงุฐุงู ูุจูุงู ูพุฎุด ูุดุฏู ุจุงุดุฏ.
            if (now.getTime() >= azanTriggerTime && diff > 0 && !azanPlayed) {
                playAzanSound();
                azanPlayed = true; // ุงุทููุงู ุงุฒ ุงูฺฉู ููุท ฺฉ ุจุงุฑ ูพุฎุด ุดูุฏ
            }

            // ุจุฑุฑุณ ุขุณุชุงููโูุง ุงุนูุงู (ุจุนุฏ ุงุฒ ููุทู ุงุฐุงู)
            if (diff > 0) {
                checkThresholds(diff);
            }

            // ุงฺฏุฑ ุฒูุงู ุจู ูพุงุงู ุฑุณุฏู ุจุงุดุฏ
            if (diff <= 0) {
                clearInterval(countdownInterval); // ุชููู ุจูโุฑูุฒุฑุณุงู ุชุงูุฑ
                elements.days.textContent = '00';
                elements.hours.textContent = '00';
                elements.minutes.textContent = '00';
                elements.seconds.textContent = '00';

                startCelebration(); // ุดุฑูุน ุงููุดู ุฌุดู ู ูพุฎุด ุขููฺฏ ูพุงุงู
                return; // ุชููู ุงุฌุฑุง ุจูู ุชุงุจุน
            }

            // ูุญุงุณุจู ู ููุงุด ุฒูุงู ุจุงูโูุงูุฏู
            const days = Math.floor(diff / (1000 * 60 * 60 * 24));
            const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((diff % (1000 * 60)) / 1000);

            elements.days.textContent = days.toString().padStart(2, '0');
            elements.hours.textContent = hours.toString().padStart(2, '0');
            elements.minutes.textContent = minutes.toString().padStart(2, '0');
            elements.seconds.textContent = seconds.toString().padStart(2, '0');

            // ุฑุณุช ฺฉุฑุฏู ูพุฑฺูโูุง ุงฺฏุฑ ุฒูุงู ุจู ุนูุจ ุจุฑฺฏุฑุฏุฏ (ูุซูุงู ุจุฑุง ุชุณุช ุง ุชุบุฑ ุชุงุฑุฎ ูุฏู)
            // ุฏุฑ ุญุงูุช ุนุงุฏ ุงู ุงุชูุงู ูู ุงูุชุฏ ู ุจุฑุง ุฌููฺฏุฑ ุงุฒ ุจุงฺฏ ุฏุฑ ุตูุฑุช ุชุบุฑ ุฏุณุช ุชุงุฑุฎ ุงุณุช
            if (diff > 0) {
                 if (hasFinalNotificationBeenSent) {
                     hasFinalNotificationBeenSent = false;
                 }
                 if (finalSoundPlayed) {
                     finalSoundPlayed = false;
                 }
                 // ุงฺฏุฑ ุฒูุงู ุงุฒ ุฒูุงู ุงุฐุงู ูุงุตูู ุจฺฏุฑุฏ ู ุฏูุจุงุฑู ุจู ูุจู ุงุฒ ุฒูุงู ุงุฐุงู ุจุฑุณุฏุ
                 // ูพุฑฺู ุงุฐุงู ูู ุฑุณุช ุดูุฏ ุชุง ุจุฑุง ุชุณุชโูุง ูฺฉุฑุฑ ฺฉุงุฑ ฺฉูุฏ.
                 if (now.getTime() < azanTriggerTime && azanPlayed) {
                     azanPlayed = false;
                     // ููฺูู ุงฺฏุฑ ุงุฒ ุฒูุงู ุงุฐุงู ุนุจูุฑ ฺฉุฑุฏู ูู ุงุฎุชูุงู ุณุงุนุช ฺฉู ุจุงุดุฏุ ุงุทููุงู ุญุงุตู ุดูุฏ ฺฉู ูพุงู ุงุฐุงู ูพููุงู ุดูุฏ
                     elements.azanNotificationMessage.style.display = 'none';
                 }
            }
        }

        // ุฑูุฏุงุฏูุง
        elements.notificationBtn.addEventListener('click', requestNotificationPermission);

        // ููุฏุงุฑุฏู ุงููู ุจุฑูุงูู
        updateNotificationButton(); // ุจูโุฑูุฒุฑุณุงู ูุถุนุช ุฏฺฉูู ุงุนูุงู ุฏุฑ ุงุจุชุฏุง
        let countdownInterval = setInterval(updateCountdown, 1000); // ุจูโุฑูุฒุฑุณุงู ุชุงูุฑ ูุฑ 1 ุซุงูู
        updateCountdown(); // ุงุฌุฑุง ุงููู ุจุฑุง ุฌููฺฏุฑ ุงุฒ ุชุฃุฎุฑ 1 ุซุงูู ุฏุฑ ููุงุด ุงููู


        // --- ุจูููโุณุงุฒโูุง ููุณ ุจุฑุง ููุจุงู ---
        // ุฌููฺฏุฑ ุงุฒ ุฑูุชุงุฑูุง ูุงุฎูุงุณุชู ุฏุฑ ููุจุงู (ูุงููุฏ ุฒูู ุจุง ุฏู ุงูฺฏุดุช ุง ููู ฺฉุงูุชฺฉุณุช)
        document.addEventListener('gesturestart', function (e) {
            e.preventDefault();
        });

        document.addEventListener('touchmove', function (e) {
            // ุฌููฺฏุฑ ุงุฒ ุฒูู ุจุง ุฏู ุงูฺฏุดุช
            if (e.scale !== 1) {
                e.preventDefault();
            }
        }, { passive: false }); // `passive: false` ุจุฑุง ุงุฌุงุฒู `preventDefault`

        let lastTouchEnd = 0;
        document.addEventListener('touchend', function (e) {
            const now = Date.now();
            // ุฌููฺฏุฑ ุงุฒ ุฏูุจุงุฑ ฺฉูฺฉ ูุงุฎูุงุณุชู ฺฉู ููฺฉู ุงุณุช ุฒูู ฺฉูุฏ
            if (now - lastTouchEnd <= 300) {
                e.preventDefault();
            }
            lastTouchEnd = now;
        }, false);


        // --- ุซุจุช Service Worker ---
        // ุงู ุจุฎุด ุจู ูุจโุณุงุช ุดูุง ูุงุจูุชโูุง PWA ูโุฏูุฏ (ูุซูุงู ุงุนูุงูโูุง ุฏุฑ ูพุณโุฒููู)
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js').then(registration => {
                    console.log('ServiceWorker ุจุง ููููุช ุซุจุช ุดุฏ:', registration.scope);
                }).catch(error => {
                    console.log('ุซุจุช ServiceWorker ูุงูููู:', error);
                });
            });
        }
    </script>
</body>
</html>